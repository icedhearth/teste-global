<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Inscrição Global Entry</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.16/jspdf.autotable.min.js"></script>
    
    <script type="module">
        // Importa as funções necessárias do Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-app.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-storage.js";
        // import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.5.0/firebase-analytics.js"; // Removido se não estiver usando ativamente

        // Configuração do Firebase com suas credenciais - CORREÇÃO APLICADA AQUI!
        const firebaseConfig = {
            apiKey: "AIzaSyAkBV0rHEghBOHl2mDOs6rMDHkUgYMxFr0",
            authDomain: "visaformulariostorage.firebaseapp.com",
            projectId: "visaformulariostorage",
            // ESTA É A LINHA QUE ESTAVA CAUSANDO O PROBLEMA!
            // Deve ser [YOUR_PROJECT_ID].appspot.com
            storageBucket: "visaformulariostorage.appspot.com", // <--- CORREÇÃO APLICADA AQUI!
            messagingSenderId: "720170394408",
            appId: "1:720170394408:web:b1c294c39c489388f6261d",
            measurementId: "G-ZFCV4JEEFT"
        };

        // Inicializa o Firebase
        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);
        // const analytics = getAnalytics(app); // Removido se não estiver usando ativamente, para evitar erros se não for inicializado corretamente ou usado

        // Número de telefone do WhatsApp para onde o PDF será enviado
        const fixedWhatsAppNumber = "5561999998165"; // Exemplo: +55 (DDD) NÚMERO

        // Função para adicionar campos de endereço
        function addAddressEntry() {
            const container = document.getElementById('addressHistoryContainer');
            const newEntry = document.createElement('div');
            newEntry.classList.add('address-entry');
            newEntry.innerHTML = `
                <hr>
                <div class="form-group">
                    <label>Endereço:</label>
                    <input type="text" name="pastAddress[]" placeholder="Rua, Número, Complemento">
                </div>
                <div class="form-group">
                    <label>Cidade:</label>
                    <input type="text" name="pastCity[]">
                </div>
                <div class="form-group">
                    <label>Estado/Província:</label>
                    <input type="text" name="pastState[]">
                </div>
                <div class="form-group">
                    <label>País:</label>
                    <input type="text" name="pastCountry[]">
                </div>
                <div class="form-group">
                    <label>De (MM/AAAA):</label>
                    <input type="month" name="pastAddressFrom[]">
                </div>
                <div class="form-group">
                    <label>Até (MM/AAAA):</label>
                    <input type="month" name="pastAddressTo[]">
                </div>
                <button type="button" onclick="this.parentElement.remove()" style="background-color: #dc3545;">Remover Endereço</button>
            `;
            container.appendChild(newEntry);
        }
        window.addAddressEntry = addAddressEntry; // Torna a função acessível globalmente

        // Função para adicionar campos de emprego
        function addEmploymentEntry() {
            const container = document.getElementById('employmentHistoryContainer');
            const newEntry = document.createElement('div');
            newEntry.classList.add('employment-entry');
            newEntry.innerHTML = `
                <hr>
                <div class="form-group">
                    <label>Empregador:</label>
                    <input type="text" name="employerName[]">
                </div>
                <div class="form-group">
                    <label>Cargo:</label>
                    <input type="text" name="occupation[]">
                </div>
                <div class="form-group">
                    <label>Endereço do Empregador:</label>
                    <input type="text" name="employerAddress[]" placeholder="Rua, Número, Cidade, País">
                </div>
                <div class="form-group">
                    <label>De (MM/AAAA):</label>
                    <input type="month" name="employmentFrom[]">
                </div>
                <div class="form-group">
                    <label>Até (MM/AAAA):</label>
                    <input type="month" name="employmentTo[]">
                </div>
                <button type="button" onclick="this.parentElement.remove()" style="background-color: #dc3545;">Remover Emprego</button>
            `;
            container.appendChild(newEntry);
        }
        window.addEmploymentEntry = addEmploymentEntry; // Torna a função acessível globalmente

        // Função para adicionar campos de viagem
        function addTravelEntry() {
            const container = document.getElementById('travelHistoryContainer');
            const newEntry = document.createElement('div');
            newEntry.classList.add('travel-entry');
            newEntry.innerHTML = `
                <hr>
                <div class="form-group">
                    <label>País Visitado:</label>
                    <input type="text" name="countryVisited[]">
                </div>
                <div class="form-group">
                    <label>Data de Entrada (MM/AAAA):</label>
                    <input type="month" name="entryDate[]">
                </div>
                <div class="form-group">
                    <label>Data de Saída (MM/AAAA):</label>
                    <input type="month" name="exitDate[]">
                </div>
                <div class="form-group">
                    <label>Propósito da Viagem:</label>
                    <textarea name="travelPurpose[]" rows="2"></textarea>
                </div>
                <button type="button" onclick="this.parentElement.remove()" style="background-color: #dc3545;">Remover Viagem</button>
            `;
            container.appendChild(newEntry);
        }
        window.addTravelEntry = addTravelEntry; // Torna a função acessível globalmente

        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('globalEntryForm');
            const submitButton = document.getElementById('submitButton');
            const loadingMessage = document.getElementById('loadingMessage');

            // Lógica para mostrar/ocultar campos condicionais
            const maritalStatusSelect = document.getElementById('maritalStatus');
            const spouseInfoDiv = document.getElementById('spouseInfo');
            const spouseDeathInfoDiv = document.getElementById('spouseDeathInfo');

            maritalStatusSelect.addEventListener('change', () => {
                const status = maritalStatusSelect.value;
                if (status === 'Casado' || status === 'Divorciado' || status === 'Viúvo' || status === 'União Estável') {
                    spouseInfoDiv.classList.remove('hidden-section');
                } else {
                    spouseInfoDiv.classList.add('hidden-section');
                    // Limpar campos do cônjuge se a seção for ocultada
                    spouseInfoDiv.querySelectorAll('input, select, textarea').forEach(input => {
                        input.value = '';
                    });
                }

                if (status === 'Viúvo') {
                    spouseDeathInfoDiv.classList.remove('hidden-section');
                } else {
                    spouseDeathInfoDiv.classList.add('hidden-section');
                    document.getElementById('spouseDod').value = '';
                }
            });

            const parentsAliveSelect = document.getElementById('parentsAlive');
            const parentsInfoDiv = document.getElementById('parentsInfo');
            const parentsInUSSelect = document.getElementById('parentsInUS');
            const parentsInUSDetailsDiv = document.getElementById('parentsInUSDetails');

            parentsAliveSelect.addEventListener('change', () => {
                if (parentsAliveSelect.value === 'Sim') {
                    parentsInfoDiv.classList.remove('hidden-section');
                } else {
                    parentsInfoDiv.classList.add('hidden-section');
                    parentsInfoDiv.querySelectorAll('input, select, textarea').forEach(input => input.value = '');
                    parentsInUSDetailsDiv.classList.add('hidden-section'); // Oculta também os detalhes dos pais nos EUA
                    document.getElementById('parentsInUS').value = '';
                }
            });

            parentsInUSSelect.addEventListener('change', () => {
                if (parentsInUSSelect.value === 'Sim') {
                    parentsInUSDetailsDiv.classList.remove('hidden-section');
                } else {
                    parentsInUSDetailsDiv.classList.add('hidden-section');
                    document.getElementById('parentsInUSExplanation').value = '';
                }
            });

            const knownInUSSelect = document.getElementById('knownInUS');
            const knownInUSInfoDiv = document.getElementById('knownInUSInfo');

            knownInUSSelect.addEventListener('change', () => {
                if (knownInUSSelect.value === 'Sim') {
                    knownInUSInfoDiv.classList.remove('hidden-section');
                } else {
                    knownInUSInfoDiv.classList.add('hidden-section');
                    knownInUSInfoDiv.querySelectorAll('input, select, textarea').forEach(input => input.value = '');
                }
            });
            
            // Lógica para perguntas de elegibilidade
            document.querySelectorAll('input[name="criminalRecord"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    document.getElementById('crimeDetails').style.display = document.getElementById('crimeYes').checked ? 'block' : 'none';
                    if (!document.getElementById('crimeYes').checked) {
                        document.getElementById('crimeExplanation').value = '';
                    }
                });
            });
            document.querySelectorAll('input[name="violationRecord"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    document.getElementById('violationDetails').style.display = document.getElementById('violationYes').checked ? 'block' : 'none';
                    if (!document.getElementById('violationYes').checked) {
                        document.getElementById('violationExplanation').value = '';
                    }
                });
            });
            document.querySelectorAll('input[name="investigationStatus"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    document.getElementById('investigationDetails').style.display = document.getElementById('investigationYes').checked ? 'block' : 'none';
                    if (!document.getElementById('investigationYes').checked) {
                        document.getElementById('investigationExplanation').value = '';
                    }
                });
            });
            document.querySelectorAll('input[name="falseInformation"]').forEach(radio => {
                radio.addEventListener('change', () => {
                    document.getElementById('falseInfoDetails').style.display = document.getElementById('falseInfoYes').checked ? 'block' : 'none';
                    if (!document.getElementById('falseInfoYes').checked) {
                        document.getElementById('falseInfoExplanation').value = '';
                    }
                });
            });

            // Função para formatar as datas no PDF
            function formatarData(dataISO) {
                if (!dataISO) return 'Não informado';
                try {
                    const [ano, mes, dia] = dataISO.split('-');
                    return `${dia}/${mes}/${ano}`;
                } catch (e) {
                    return dataISO; // Retorna como está se não conseguir formatar
                }
            }

            // Função para formatar meses no PDF
            function formatarMesAno(mesAnoISO) {
                if (!mesAnoISO) return 'Não informado';
                try {
                    const [ano, mes] = mesAnoISO.split('-');
                    return `${mes}/${ano}`;
                } catch (e) {
                    return mesAnoISO; // Retorna como está se não conseguir formatar
                }
            }

            form.addEventListener('submit', async (event) => {
                event.preventDefault();
                submitButton.disabled = true;
                loadingMessage.style.display = 'block';

                try {
                    const formData = new FormData(form);
                    const solicitanteNome = formData.get('fullName').toUpperCase().replace(/\s+/g, '_') || 'GlobalEntry_Sem_Nome';

                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();

                    let y = 10;
                    doc.setFontSize(18);
                    doc.text("Formulário de Inscrição Global Entry", 105, y, { align: 'center' });
                    y += 10;
                    doc.setFontSize(10);
                    doc.text(`Preenchido por: ${formData.get('fullName') || 'Não Informado'}`, 105, y, { align: 'center' });
                    y += 20;

                    // Função auxiliar para adicionar texto com quebra de linha
                    const addSection = (title, data) => {
                        doc.setFontSize(14);
                        doc.setTextColor(0, 0, 139); // Azul marinho
                        doc.text(title, 10, y);
                        y += 7;
                        doc.setDrawColor(0, 123, 255); // Azul para a linha
                        doc.setLineWidth(0.5);
                        doc.line(10, y, 200, y); // Linha abaixo do título
                        y += 10;
                        doc.setFontSize(10);
                        doc.setTextColor(0, 0, 0); // Preto para o texto

                        for (const key in data) {
                            if (data[key]) { // Apenas adiciona se o valor não for vazio
                                let displayValue = data[key];
                                if (key.toLowerCase().includes('data') && data[key].includes('-')) {
                                    displayValue = formatarData(data[key]);
                                } else if (key.toLowerCase().includes('mes') || key.toLowerCase().includes('ano')) { // Para campos de mês/ano
                                    displayValue = formatarMesAno(data[key]);
                                }
                                doc.text(`${key}: ${displayValue}`, 10, y);
                                y += 7;
                                if (y > 280) { // Se passar da página, adiciona nova página
                                    doc.addPage();
                                    y = 10;
                                    doc.setFontSize(10);
                                }
                            }
                        }
                        y += 10; // Espaço após a seção
                    };

                    // Dados Pessoais
                    const personalData = {
                        'Nome Completo': formData.get('fullName'),
                        'Data de Nascimento': formData.get('dob'),
                        'Gênero': formData.get('gender'),
                        'Nacionalidade Atual': formData.get('nationality'),
                        'Outras Nacionalidades': formData.get('otherNationalities'),
                        'País de Nascimento': formData.get('countryOfBirth'),
                        'Cidade de Nascimento': formData.get('cityOfBirth'),
                        'Estado Civil': formData.get('maritalStatus')
                    };
                    addSection('1. Dados Pessoais', personalData);

                    // Dados do Cônjuge (se aplicável)
                    if (formData.get('maritalStatus') === 'Casado' || formData.get('maritalStatus') === 'Divorciado' || formData.get('maritalStatus') === 'Viúvo' || formData.get('maritalStatus') === 'União Estável') {
                        const spouseData = {
                            'Nome Completo do Cônjuge': formData.get('spouseFullName'),
                            'Data de Nascimento do Cônjuge': formData.get('spouseDob'),
                            'País de Nascimento do Cônjuge': formData.get('spouseCountryOfBirth')
                        };
                        if (formData.get('maritalStatus') === 'Viúvo') {
                            spouseData['Data de Falecimento do Cônjuge'] = formData.get('spouseDod');
                        }
                        addSection('Dados do Cônjuge', spouseData);
                    }

                    // Dados do Passaporte
                    const passportData = {
                        'Número do Passaporte': formData.get('passportNumber'),
                        'Data de Emissão': formData.get('issueDate'),
                        'Data de Validade': formData.get('expiryDate'),
                        'País Emissor': formData.get('issuingCountry')
                    };
                    addSection('2. Dados do Passaporte', passportData);

                    // Endereço Atual e Contato
                    const contactData = {
                        'Endereço Atual': formData.get('currentAddress'),
                        'Cidade': formData.get('currentCity'),
                        'Estado/Província': formData.get('currentState'),
                        'CEP/Código Postal': formData.get('currentZipCode'),
                        'País': formData.get('currentCountry'),
                        'Telefone': formData.get('phone'),
                        'E-mail': formData.get('email')
                    };
                    addSection('3. Endereço Atual e Contato', contactData);

                    // Informações Familiares
                    const familyData = {
                        'Pais Estão Vivos?': formData.get('parentsAlive')
                    };
                    if (formData.get('parentsAlive') === 'Sim') {
                        familyData['Nome Completo do Pai'] = formData.get('fatherFullName');
                        familyData['Data de Nascimento do Pai'] = formData.get('fatherDob');
                        familyData['Nome Completo da Mãe'] = formData.get('motherFullName');
                        familyData['Data de Nascimento da Mãe'] = formData.get('motherDob');
                        familyData['Pais nos EUA?'] = formData.get('parentsInUS');
                        if (formData.get('parentsInUS') === 'Sim') {
                            familyData['Explicação Pais nos EUA'] = formData.get('parentsInUSExplanation');
                        }
                    }
                    familyData['Tem Conhecidos nos EUA?'] = formData.get('knownInUS');
                    if (formData.get('knownInUS') === 'Sim') {
                        familyData['Nome do Conhecido'] = formData.get('knownName');
                        familyData['Telefone do Conhecido'] = formData.get('knownPhone');
                        familyData['E-mail do Conhecido'] = formData.get('knownEmail');
                        familyData['Vínculo com o Solicitante'] = formData.get('knownRelationship');
                    }
                    addSection('4. Informações Familiares', familyData);

                    // Histórico de Endereços
                    const pastAddresses = [];
                    document.querySelectorAll('#addressHistoryContainer .address-entry').forEach(entry => {
                        const address = entry.querySelector('[name="pastAddress[]"]').value;
                        const city = entry.querySelector('[name="pastCity[]"]').value;
                        const state = entry.querySelector('[name="pastState[]"]').value;
                        const country = entry.querySelector('[name="pastCountry[]"]').value;
                        const from = entry.querySelector('[name="pastAddressFrom[]"]').value;
                        const to = entry.querySelector('[name="pastAddressTo[]"]').value;
                        if (address || city || state || country || from || to) {
                             pastAddresses.push([
                                address || 'N/I',
                                city || 'N/I',
                                state || 'N/I',
                                country || 'N/I',
                                formatarMesAno(from),
                                formatarMesAno(to)
                            ]);
                        }
                    });
                    if (pastAddresses.length > 0) {
                        doc.addPage();
                        y = 10;
                        doc.setFontSize(14);
                        doc.setTextColor(0, 0, 139);
                        doc.text('5. Histórico de Endereços (Últimos 5 anos)', 10, y);
                        y += 7;
                        doc.setDrawColor(0, 123, 255);
                        doc.setLineWidth(0.5);
                        doc.line(10, y, 200, y);
                        y += 10;
                        doc.autoTable({
                            startY: y,
                            head: [['Endereço', 'Cidade', 'Estado', 'País', 'De (MM/AAAA)', 'Até (MM/AAAA)']],
                            body: pastAddresses,
                            theme: 'grid',
                            styles: { fontSize: 8, cellPadding: 2, overflow: 'linebreak' },
                            headStyles: { fillColor: [0, 123, 255], textColor: [255, 255, 255] },
                            columnStyles: { 0: { cellWidth: 40 }, 1: { cellWidth: 30 }, 2: { cellWidth: 30 }, 3: { cellWidth: 30 }, 4: { cellWidth: 30 }, 5: { cellWidth: 30 } },
                            didDrawPage: (data) => {
                                y = data.cursor.y + 10;
                            }
                        });
                        y = doc.autoTable.previous.finalY + 10;
                    }

                    // Histórico de Emprego
                    const employmentHistory = [];
                    document.querySelectorAll('#employmentHistoryContainer .employment-entry').forEach(entry => {
                        const employerName = entry.querySelector('[name="employerName[]"]').value;
                        const occupation = entry.querySelector('[name="occupation[]"]').value;
                        const employerAddress = entry.querySelector('[name="employerAddress[]"]').value;
                        const from = entry.querySelector('[name="employmentFrom[]"]').value;
                        const to = entry.querySelector('[name="employmentTo[]"]').value;
                        if (employerName || occupation || employerAddress || from || to) {
                            employmentHistory.push([
                                employerName || 'N/I',
                                occupation || 'N/I',
                                employerAddress || 'N/I',
                                formatarMesAno(from),
                                formatarMesAno(to)
                            ]);
                        }
                    });
                    if (employmentHistory.length > 0) {
                        doc.addPage();
                        y = 10;
                        doc.setFontSize(14);
                        doc.setTextColor(0, 0, 139);
                        doc.text('6. Histórico de Emprego (Últimos 5 anos)', 10, y);
                        y += 7;
                        doc.setDrawColor(0, 123, 255);
                        doc.setLineWidth(0.5);
                        doc.line(10, y, 200, y);
                        y += 10;
                        doc.autoTable({
                            startY: y,
                            head: [['Empregador', 'Cargo', 'Endereço', 'De (MM/AAAA)', 'Até (MM/AAAA)']],
                            body: employmentHistory,
                            theme: 'grid',
                            styles: { fontSize: 8, cellPadding: 2, overflow: 'linebreak' },
                            headStyles: { fillColor: [0, 123, 255], textColor: [255, 255, 255] },
                            columnStyles: { 0: { cellWidth: 40 }, 1: { cellWidth: 30 }, 2: { cellWidth: 50 }, 3: { cellWidth: 30 }, 4: { cellWidth: 30 } },
                            didDrawPage: (data) => {
                                y = data.cursor.y + 10;
                            }
                        });
                        y = doc.autoTable.previous.finalY + 10;
                    }

                    // Histórico de Viagens Internacionais
                    const travelHistory = [];
                    document.querySelectorAll('#travelHistoryContainer .travel-entry').forEach(entry => {
                        const country = entry.querySelector('[name="countryVisited[]"]').value;
                        const entryDate = entry.querySelector('[name="entryDate[]"]').value;
                        const exitDate = entry.querySelector('[name="exitDate[]"]').value;
                        const purpose = entry.querySelector('[name="travelPurpose[]"]').value;
                        if (country || entryDate || exitDate || purpose) {
                            travelHistory.push([
                                country || 'N/I',
                                formatarMesAno(entryDate),
                                formatarMesAno(exitDate),
                                purpose || 'N/I'
                            ]);
                        }
                    });
                    if (travelHistory.length > 0) {
                        doc.addPage();
                        y = 10;
                        doc.setFontSize(14);
                        doc.setTextColor(0, 0, 139);
                        doc.text('7. Histórico de Viagens Internacionais (Últimos 5 anos)', 10, y);
                        y += 7;
                        doc.setDrawColor(0, 123, 255);
                        doc.setLineWidth(0.5);
                        doc.line(10, y, 200, y);
                        y += 10;
                        doc.autoTable({
                            startY: y,
                            head: [['País Visitado', 'Entrada (MM/AAAA)', 'Saída (MM/AAAA)', 'Propósito']],
                            body: travelHistory,
                            theme: 'grid',
                            styles: { fontSize: 8, cellPadding: 2, overflow: 'linebreak' },
                            headStyles: { fillColor: [0, 123, 255], textColor: [255, 255, 255] },
                            columnStyles: { 0: { cellWidth: 40 }, 1: { cellWidth: 35 }, 2: { cellWidth: 35 }, 3: { cellWidth: 'auto' } },
                            didDrawPage: (data) => {
                                y = data.cursor.y + 10;
                            }
                        });
                        y = doc.autoTable.previous.finalY + 10;
                    }

                    // Perguntas de Elegibilidade e Histórico
                    if (y > 260) { doc.addPage(); y = 10; } // Nova página se necessário
                    addSection('8. Perguntas de Elegibilidade e Histórico', {
                        'Condenado por Crime?': formData.get('criminalRecord') + (formData.get('criminalRecord') === 'Sim' ? ' - ' + formData.get('crimeExplanation') : ''),
                        'Violação de Leis?': formData.get('violationRecord') + (formData.get('violationRecord') === 'Sim' ? ' - ' + formData.get('violationExplanation') : ''),
                        'Investigação em Andamento?': formData.get('investigationStatus') + (formData.get('investigationStatus') === 'Sim' ? ' - ' + formData.get('investigationExplanation') : ''),
                        'Forneceu Informação Falsa?': formData.get('falseInformation') + (formData.get('falseInformation') === 'Sim' ? ' - ' + formData.get('falseInfoExplanation') : '')
                    });

                    // Declaração (Adicionar a declaração no final do PDF)
                    if (y > 200) { doc.addPage(); y = 10; } // Nova página se necessário
                    doc.setFontSize(14);
                    doc.setTextColor(0, 0, 139);
                    doc.text('9. Declaração e Autorização', 10, y);
                    y += 7;
                    doc.setDrawColor(0, 123, 255);
                    doc.setLineWidth(0.5);
                    doc.line(10, y, 200, y);
                    y += 10;

                    doc.setFontSize(10);
                    doc.setTextColor(0, 0, 0);

                    const declaracaoNome = formData.get('declaracaoNome') || '_________________________';
                    const declaracaoLocal = formData.get('declaracaoLocal') || '_________________________';
                    const declaracaoData = formData.get('declaracaoData') ? formatarData(formData.get('declaracaoData')) : '____________';

                    const declarationText = `Eu, ${declaracaoNome}, declaro, sob as penas da lei, que li e compreendi integralmente todas as questões contidas nesta solicitação de visto e afirmo que as respostas por mim fornecidas são verdadeiras, completas e corretas, conforme o meu melhor conhecimento e convicção.

Declaro estar ciente de que:
1. Qualquer declaração falsa, incompleta ou enganosa poderá resultar na recusa permanente do visto ou na negativa de admissão nos Estados Unidos, conforme disposto na legislação aplicável.
2. Todas as informações prestadas nesta solicitação constituem declarações juramentadas, realizadas sob pena de perjúrio, nos termos do disposto no 28 U.S.C. § 1746.
3. Informações adicionais poderão ser requisitadas pelas autoridades competentes após a análise desta solicitação, sendo minha responsabilidade fornecê-las tempestivamente.
4. As informações contidas nesta solicitação poderão ser compartilhadas com outras agências governamentais dos Estados Unidos, que possuem autoridade para utilizá-las para fins de aplicação da lei ou para propósitos imigratórios, conforme permitido pela legislação vigente.
5. A fotografia fornecida com esta solicitação poderá ser utilizada pelas autoridades americanas para fins de verificação de identidade, empregabilidade ou outros objetivos legais previstos na legislação dos Estados Unidos.

Declaro ainda:
6. Que sou exclusivamente responsável pela autenticidade e exatidão dos documentos apresentados e das informações prestadas nesta solicitação.
7. Que tenho pleno conhecimento de que a concessão ou negativa do visto é prerrogativa exclusiva da Autoridade Consular Americana, não cabendo a terceiros qualquer ingerência sobre tal decisão.
8. Que estou ciente de que, em processos de renovação de visto, entrevistas presenciais poderão ser exigidas a critério exclusivo da Autoridade Consular Americana.
9. Que reconheço que o serviço contratado constitui assessoria relacionada ao processo de preenchimento de documentação, agendamento de biometria e entrevista, não abrangendo serviços de entrega ou retirada de documentos no Centro de Atendimento ao Solicitante de Visto (CASV), sendo necessária a contratação de um agente colaborador, caso eu deseje tais serviços adicionais.
10. Que a aposição de minha assinatura eletrônica neste documento possui validade jurídica, conforme a legislação aplicável, e representa meu reconhecimento expresso dos serviços contratados.

Local: ${declaracaoLocal} Data: ${declaracaoData}
Aceito os termos da declaração e autorizo o envio: ${formData.get('aceitoTermos') ? 'Sim' : 'Não'}
`;
                    const splitText = doc.splitTextToSize(declarationText, 190);
                    doc.text(splitText, 10, y);
                    y += (splitText.length * 7) + 10; // Ajusta 'y' após a declaração


                    // Salva o PDF no navegador (opcional, mas bom para o usuário)
                    doc.save(`GlobalEntry_${solicitanteNome}.pdf`);

                    // Prepara para upload no Firebase Storage
                    const pdfBlob = doc.output('blob');
                    const timestamp = Date.now();
                    
                    // Nome do arquivo no Firebase Storage: pdfs/GlobalEntry_NOME_COMPLETO_TIMESTAMP.pdf
                    // OBS: o nome do arquivo foi ajustado para usar a mesma pasta 'pdfs/'
                    // e adicionar 'GlobalEntry_' para identificação
                    const firebaseFileName = `pdfs/GlobalEntry_${solicitanteNome}_${timestamp}.pdf`;
                    const storageRef = ref(storage, firebaseFileName);

                    // Upload do PDF
                    await uploadBytes(storageRef, pdfBlob);
                    const downloadUrl = await getDownloadURL(storageRef);

                    console.log('PDF uploaded successfully:', downloadUrl);

                    // Envio para o WhatsApp
                    let whatsappMessage = `*Novo Formulário Global Entry Recebido!* \n\n`;
                    whatsappMessage += `*Nome do Solicitante:* ${formData.get('fullName') || 'Não Informado'}\n`;
                    whatsappMessage += `*E-mail:* ${formData.get('email') || 'Não Informado'}\n`;
                    whatsappMessage += `*Telefone do Cliente:* ${formData.get('phone') || 'Não Informado'}\n`;
                    whatsappMessage += `*Link para o Formulário Completo (PDF):*\n${downloadUrl}\n\n`;
                    whatsappMessage += `Por favor, revise o PDF para prosseguir.`;

                    const whatsappUrl = `https://api.whatsapp.com/send?phone=${fixedWhatsAppNumber}&text=${encodeURIComponent(whatsappMessage)}`;
                    window.open(whatsappUrl, '_blank');

                    alert('Formulário Global Entry enviado com sucesso! O PDF foi gerado e o link enviado para o WhatsApp da empresa.');

                } catch (error) {
                    console.error("Erro ao gerar PDF ou enviar para Firebase/WhatsApp:", error);
                    alert("Ocorreu um erro ao processar o formulário. Por favor, tente novamente. Verifique o console para mais detalhes.");
                } finally {
                    submitButton.disabled = false;
                    loadingMessage.style.display = 'none';
                }
            });
        });
    </script>
    <style>
        /* Estilos Globais */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5; /* Fundo cinza claro */
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px; /* Padding padrão para desktop */
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh; /* Altura mínima da tela */
            box-sizing: border-box; /* Inclui padding e border na largura total */
        }

        .container {
            background-color: #ffffff;
            padding: 40px; /* Padding padrão para desktop */
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); /* Sombra mais suave */
            max-width: 850px; /* Largura máxima para melhor leitura */
            width: 100%;
            margin-top: 20px;
            margin-bottom: 20px;
            box-sizing: border-box; /* Inclui padding e border na largura total */
        }

        h1 {
            color: #003087; /* Azul marinho para o título principal */
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.4em; /* Título maior */
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05); /* Sombra sutil no texto */
        }

        h3 {
            color: #0056b3; /* Azul médio para títulos de seção */
            border-bottom: 3px solid #007bff; /* Borda azul vibrante */
            padding-bottom: 10px;
            margin-top: 35px;
            margin-bottom: 25px;
            font-size: 1.8em;
            font-weight: 600;
        }

        h4 {
            color: #007bff; /* Azul claro para subtítulos */
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        p {
            margin-bottom: 15px;
            font-size: 1.05em;
            color: #555;
        }

        label {
            display: block;
            margin: 18px 0 8px; /* Mais espaço acima do label */
            font-weight: 600;
            color: #444;
            font-size: 0.98em;
        }

        input[type="text"],
        input[type="date"],
        input[type="tel"],
        input[type="email"],
        textarea,
        select,
        input[type="month"], /* Adicionado para campos de mês/ano */
        input[type="number"] {
            width: calc(100% - 24px); /* Ajuste para padding e borda */
            padding: 12px;
            margin-bottom: 18px; /* Mais espaço abaixo dos campos */
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            box-sizing: border-box;
        }

        input[type="text"]:focus,
        input[type="date"]:focus,
        input[type="tel"]:focus,
        input[type="email"]:focus,
        textarea:focus,
        select:focus,
        input[type="month"]:focus, /* Adicionado para campos de mês/ano */
        input[type="number"]:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25); /* Efeito de foco mais suave */
            outline: none;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        input[type="checkbox"] {
            width: auto; /* Checkbox não ocupa 100% da largura */
            margin-right: 10px;
            transform: scale(1.2); /* Aumenta um pouco o checkbox */
            vertical-align: middle; /* Alinha com o texto */
            margin-top: -3px; /* Pequeno ajuste para alinhamento visual */
        }

        button { /* Alterado de type="submit" para abranger todos os botões */
            background-color: #007bff; /* Azul padrão para botões */
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease;
            margin: 0 5px; /* Espaçamento entre botões */
        }

        button:hover {
            background-color: #0056b3;
        }
        
        button[type="submit"], .button-group button { /* Estilo específico para o botão de envio principal */
            background-color: #28a745; /* Verde vibrante */
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 1.15em; /* Texto maior no botão */
            font-weight: 600;
            width: 100%;
            margin-top: 40px; /* Mais espaço antes do botão */
            letter-spacing: 0.5px; /* Espaçamento entre letras */
        }

        button[type="submit"]:hover, .button-group button:hover {
            background-color: #218838; /* Verde mais escuro no hover */
            transform: translateY(-2px); /* Efeito de elevação */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Sombra no hover */
        }
        
        button:disabled {
            background-color: #a0a0a0;
            cursor: not-allowed;
        }


        hr {
            border: 0;
            border-top: 2px dashed #e0e0e0; /* Linha tracejada suave */
            margin: 40px 0; /* Espaço maior para as linhas */
        }

        /* Estilos para seções que podem ser ocultadas/exibidas (mantendo display: none) */
        .hidden-section {
            display: none;
        }

        .conditional-section {
            background-color: #f8f9fa; /* Fundo sutil para seções condicionais */
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            margin-bottom: 25px;
        }

        /* Estilos para a declaração */
        .declaration-section {
            background-color: #e6f7ff; /* Fundo azul claro */
            border: 1px solid #99d6ff;
            border-radius: 10px;
            padding: 30px;
            margin-top: 50px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); /* Sombra interna sutil */
        }

        .declaration-section h3 {
            border-bottom: 2px solid #0056b3;
            padding-bottom: 10px;
            margin-top: 0;
            margin-bottom: 25px;
        }

        .declaration-section ol {
            padding-left: 28px;
            margin-bottom: 20px;
            font-size: 0.95em;
            color: #444;
        }

        .declaration-section ol li {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .declaration-section p {
            margin-bottom: 10px;
            font-size: 0.98em;
            color: #333;
        }

        .declaration-section strong {
            color: #0056b3;
        }

        .declaration-section input[type="text"][name="declaracaoNome"],
        .declaration-section input[type="text"][name="declaracaoLocal"],
        .declaration-section input[type="date"][name="declaracaoData"] {
            width: auto; /* Permite que o input se ajuste ao conteúdo */
            display: inline-block; /* Alinha com o texto */
            padding: 8px;
            font-size: 0.9em;
            border-radius: 5px;
            margin-left: 5px; /* Pequeno espaçamento */
        }

        .declaration-section label input[type="checkbox"] {
            vertical-align: middle;
            margin-top: -2px; /* Ajuste fino para alinhamento */
        }

        /* *********************************************************************************** */
        /* Estilos para Responsividade (Mobile First) */
        /* Aplicados a partir de telas menores e sobrescritos por telas maiores se necessário */
        /* *********************************************************************************** */

        /* Ajustes gerais para telas pequenas */
        body {
            padding: 10px; /* Menor padding nas bordas para celulares */
        }

        .container {
            padding: 20px; /* Menor padding interno para celulares */
            margin-top: 10px;
            margin-bottom: 10px;
            border-radius: 8px; /* Borda menos arredondada para mobile */
        }

        h1 {
            font-size: 1.8em; /* Título principal menor em mobile */
            margin-bottom: 20px;
        }

        h3 {
            font-size: 1.4em; /* Títulos de seção menores em mobile */
            margin-top: 25px;
            margin-bottom: 20px;
            border-bottom-width: 2px; /* Borda ligeiramente mais fina */
        }

        h4 {
            font-size: 1.2em; /* Subtítulos menores em mobile */
            margin-top: 20px;
            margin-bottom: 10px;
        }

        p, label {
            font-size: 0.95em; /* Texto ligeiramente menor */
        }

        input[type="text"],
        input[type="date"],
        input[type="tel"],
        input[type="email"],
        input[type="month"],
        input[type="number"],
        textarea,
        select {
            width: calc(100% - 20px); /* Ajuste para padding menor (10px + 10px) */
            padding: 10px; /* Padding menor para inputs em mobile */
            margin-bottom: 15px; /* Menor espaço abaixo */
            font-size: 0.95em;
        }

        button[type="submit"], .button-group button {
            padding: 12px 20px; /* Padding menor para o botão */
            font-size: 1em; /* Texto menor no botão */
            margin-top: 30px; /* Menor espaço antes do botão */
        }

        /* Ajustes específicos para a seção de declaração em mobile */
        .declaration-section {
            padding: 15px; /* Menor padding */
            margin-top: 30px;
        }
        .declaration-section ol {
            padding-left: 20px; /* Ajuste do padding da lista */
            font-size: 0.9em;
        }
        .declaration-section p {
            font-size: 0.9em;
        }
        .declaration-section input[type="text"][name="declaracaoNome"],
        .declaration-section input[type="text"][name="declaracaoLocal"],
        .declaration-section input[type="date"][name="declaracaoData"] {
            width: 100%; /* Ocupa a largura total para melhor preenchimento */
            display: block; /* Cada one em sua própria linha */
            margin-left: 0;
            margin-top: 5px; /* Espaçamento entre eles */
            margin-bottom: 10px;
        }
        .declaration-section label input[type="checkbox"] {
            margin-left: 0; /* Alinha o checkbox */
        }

        /* Media Query para telas menores que 600px (smartphones) */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .container {
                padding: 15px;
                margin-top: 10px;
                margin-bottom: 10px;
            }
            h1 {
                font-size: 1.6em;
            }
            h3 {
                font-size: 1.3em;
                margin-top: 20px;
                margin-bottom: 15px;
            }
            h4 {
                font-size: 1.1em;
            }
            p, label {
                font-size: 0.9em;
            }
            input[type="text"],
            input[type="date"],
            input[type="tel"],
            input[type="email"],
            input[type="month"],
            input[type="number"],
            textarea,
            select {
                padding: 8px;
                font-size: 0.9em;
            }
            button[type="submit"], .button-group button {
                padding: 10px 15px;
                font-size: 0.95em;
            }
            .declaration-section ol li {
                margin-bottom: 8px;
            }
        }

        /* Media Query para telas muito pequenas, caso necessário (ex: 320px de largura) */
        @media (max-width: 320px) {
            h1 {
                font-size: 1.4em;
            }
            h3 {
                font-size: 1.2em;
            }
            input[type="text"],
            input[type="date"],
            input[type="tel"],
            input[type="email"],
            input[type="month"],
            input[type="number"],
            textarea,
            select {
                font-size: 0.85em;
            }
            button[type="submit"], .button-group button {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Formulário de Inscrição Global Entry</h1>
        <p style="text-align: center;">Preencha o formulário com seus dados para a aplicação do Global Entry.</p>

        <form id="globalEntryForm">
            <div class="form-section">
                <h3>1. Dados Pessoais</h3>
                <div class="form-group">
                    <label for="fullName">Nome Completo (como no passaporte):</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>
                <div class="form-group">
                    <label for="dob">Data de Nascimento:</label>
                    <input type="date" id="dob" name="dob" required>
                </div>
                <div class="form-group">
                    <label for="gender">Gênero:</label>
                    <select id="gender" name="gender" required>
                        <option value="">Selecione</option>
                        <option value="Masculino">Masculino</option>
                        <option value="Feminino">Feminino</option>
                        <option value="Outro">Outro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="nationality">Nacionalidade Atual:</label>
                    <input type="text" id="nationality" name="nationality" required>
                </div>
                <div class="form-group">
                    <label for="otherNationalities">Outras Nacionalidades (se houver):</label>
                    <input type="text" id="otherNationalities" name="otherNationalities">
                </div>
                <div class="form-group">
                    <label for="countryOfBirth">País de Nascimento:</label>
                    <input type="text" id="countryOfBirth" name="countryOfBirth" required>
                </div>
                <div class="form-group">
                    <label for="cityOfBirth">Cidade de Nascimento:</label>
                    <input type="text" id="cityOfBirth" name="cityOfBirth" required>
                </div>
                <div class="form-group">
                    <label for="maritalStatus">Estado Civil:</label>
                    <select id="maritalStatus" name="maritalStatus" required>
                        <option value="">Selecione</option>
                        <option value="Solteiro">Solteiro</option>
                        <option value="Casado">Casado</option>
                        <option value="Divorciado">Divorciado</option>
                        <option value="Viúvo">Viúvo</option>
                        <option value="União Estável">União Estável</option>
                    </select>
                </div>

                <div id="spouseInfo" class="conditional-section hidden-section">
                    <h4>Dados do Cônjuge</h4>
                    <div class="form-group">
                        <label for="spouseFullName">Nome Completo do Cônjuge:</label>
                        <input type="text" id="spouseFullName" name="spouseFullName">
                    </div>
                    <div class="form-group">
                        <label for="spouseDob">Data de Nascimento do Cônjuge:</label>
                        <input type="date" id="spouseDob" name="spouseDob">
                    </div>
                    <div class="form-group">
                        <label for="spouseCountryOfBirth">País de Nascimento do Cônjuge:</label>
                        <input type="text" id="spouseCountryOfBirth" name="spouseCountryOfBirth">
                    </div>
                    <div id="spouseDeathInfo" class="conditional-section hidden-section">
                        <div class="form-group">
                            <label for="spouseDod">Data de Falecimento do Cônjuge:</label>
                            <input type="date" id="spouseDod" name="spouseDod">
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3>2. Dados do Passaporte</h3>
                <div class="form-group">
                    <label for="passportNumber">Número do Passaporte:</label>
                    <input type="text" id="passportNumber" name="passportNumber" required>
                </div>
                <div class="form-group">
                    <label for="issueDate">Data de Emissão:</label>
                    <input type="date" id="issueDate" name="issueDate" required>
                </div>
                <div class="form-group">
                    <label for="expiryDate">Data de Validade:</label>
                    <input type="date" id="expiryDate" name="expiryDate" required>
                </div>
                <div class="form-group">
                    <label for="issuingCountry">País Emissor:</label>
                    <input type="text" id="issuingCountry" name="issuingCountry" required>
                </div>
            </div>

            <div class="form-section">
                <h3>3. Endereço Atual e Contato</h3>
                <div class="form-group">
                    <label for="currentAddress">Endereço (Rua, Número, Complemento):</label>
                    <input type="text" id="currentAddress" name="currentAddress" required>
                </div>
                <div class="form-group">
                    <label for="currentCity">Cidade:</label>
                    <input type="text" id="currentCity" name="currentCity" required>
                </div>
                <div class="form-group">
                    <label for="currentState">Estado/Província:</label>
                    <input type="text" id="currentState" name="currentState" required>
                </div>
                <div class="form-group">
                    <label for="currentZipCode">CEP/Código Postal:</label>
                    <input type="text" id="currentZipCode" name="currentZipCode" required>
                </div>
                <div class="form-group">
                    <label for="currentCountry">País:</label>
                    <input type="text" id="currentCountry" name="currentCountry" required>
                </div>
                <div class="form-group">
                    <label for="phone">Telefone:</label>
                    <input type="tel" id="phone" name="phone" placeholder="(XX) XXXXX-XXXX" required>
                </div>
                <div class="form-group">
                    <label for="email">E-mail:</label>
                    <input type="email" id="email" name="email" required>
                </div>
            </div>

            <div class="form-section">
                <h3>4. Informações Familiares</h3>
                <div class="form-group">
                    <label for="parentsAlive">Seus pais estão vivos?</label>
                    <select id="parentsAlive" name="parentsAlive" required>
                        <option value="">Selecione</option>
                        <option value="Sim">Sim</option>
                        <option value="Não">Não</option>
                    </select>
                </div>
                <div id="parentsInfo" class="conditional-section hidden-section">
                    <div class="form-group">
                        <label for="fatherFullName">Nome Completo do Pai:</label>
                        <input type="text" id="fatherFullName" name="fatherFullName">
                    </div>
                    <div class="form-group">
                        <label for="fatherDob">Data de Nascimento do Pai:</label>
                        <input type="date" id="fatherDob" name="fatherDob">
                    </div>
                    <div class="form-group">
                        <label for="motherFullName">Nome Completo da Mãe:</label>
                        <input type="text" id="motherFullName" name="motherFullName">
                    </div>
                    <div class="form-group">
                        <label for="motherDob">Data de Nascimento da Mãe:</label>
                        <input type="date" id="motherDob" name="motherDob">
                    </div>
                    <div class="form-group">
                        <label for="parentsInUS">Seus pais estão nos EUA?</label>
                    <select id="parentsInUS" name="parentsInUS">
                            <option value="">Selecione</option>
                            <option value="Sim">Sim</option>
                            <option value="Não">Não</option>
                        </select>
                    </div>
                    <div id="parentsInUSDetails" class="conditional-section hidden-section">
                        <div class="form-group">
                            <label for="parentsInUSExplanation">Explique a situação dos seus pais nos EUA:</label>
                            <textarea id="parentsInUSExplanation" name="parentsInUSExplanation" rows="2"></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="knownInUS">Você tem conhecidos nos EUA?</label>
                    <select id="knownInUS" name="knownInUS" required>
                        <option value="">Selecione</option>
                        <option value="Sim">Sim</option>
                        <option value="Não">Não</option>
                    </select>
                </div>
                <div id="knownInUSInfo" class="conditional-section hidden-section">
                    <h4>Dados do Conhecido nos EUA</h4>
                    <div class="form-group">
                        <label for="knownName">Nome Completo do Conhecido:</label>
                        <input type="text" id="knownName" name="knownName">
                    </div>
                    <div class="form-group">
                        <label for="knownPhone">Telefone do Conhecido:</label>
                        <input type="tel" id="knownPhone" name="knownPhone">
                    </div>
                    <div class="form-group">
                        <label for="knownEmail">E-mail do Conhecido:</label>
                        <input type="email" id="knownEmail" name="knownEmail">
                    </div>
                    <div class="form-group">
                        <label for="knownRelationship">Vínculo com o Solicitante:</label>
                        <input type="text" id="knownRelationship" name="knownRelationship" placeholder="Ex: amigo, parente, colega">
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3>5. Histórico de Endereços (Últimos 5 anos)</h3>
                <p>Liste todos os endereços onde você residiu nos últimos 5 anos. Comece pelo mais recente.</p>
                <div id="addressHistoryContainer">
                    <div class="address-entry">
                        <div class="form-group">
                            <label>Endereço:</label>
                            <input type="text" name="pastAddress[]" placeholder="Rua, Número, Complemento">
                        </div>
                        <div class="form-group">
                            <label>Cidade:</label>
                            <input type="text" name="pastCity[]">
                        </div>
                        <div class="form-group">
                            <label>Estado/Província:</label>
                            <input type="text" name="pastState[]">
                        </div>
                        <div class="form-group">
                            <label>País:</label>
                            <input type="text" name="pastCountry[]">
                        </div>
                        <div class="form-group">
                            <label>De (MM/AAAA):</label>
                            <input type="month" name="pastAddressFrom[]">
                        </div>
                        <div class="form-group">
                            <label>Até (MM/AAAA):</label>
                            <input type="month" name="pastAddressTo[]">
                        </div>
                    </div>
                </div>
                <button type="button" onclick="addAddressEntry()" style="background-color: #28a745; margin-top: 10px;">Adicionar Endereço</button>
            </div>

            <div class="form-section">
                <h3>6. Histórico de Emprego (Últimos 5 anos)</h3>
                <p>Liste seu histórico de emprego nos últimos 5 anos. Comece pelo mais recente.</p>
                <div id="employmentHistoryContainer">
                    <div class="employment-entry">
                        <div class="form-group">
                            <label>Empregador:</label>
                            <input type="text" name="employerName[]">
                        </div>
                        <div class="form-group">
                            <label>Cargo:</label>
                            <input type="text" name="occupation[]">
                        </div>
                        <div class="form-group">
                            <label>Endereço do Empregador:</label>
                            <input type="text" name="employerAddress[]" placeholder="Rua, Número, Cidade, País">
                        </div>
                        <div class="form-group">
                            <label>De (MM/AAAA):</label>
                            <input type="month" name="employmentFrom[]">
                        </div>
                        <div class="form-group">
                            <label>Até (MM/AAAA):</label>
                            <input type="month" name="employmentTo[]">
                        </div>
                    </div>
                </div>
                <button type="button" onclick="addEmploymentEntry()" style="background-color: #28a745; margin-top: 10px;">Adicionar Emprego</button>
            </div>

            <div class="form-section">
                <h3>7. Histórico de Viagens Internacionais (Últimos 5 anos)</h3>
                <p>Liste todos os países que você visitou nos últimos 5 anos, exceto o seu país de residência atual.</p>
                <div id="travelHistoryContainer">
                    <div class="travel-entry">
                        <div class="form-group">
                            <label>País Visitado:</label>
                            <input type="text" name="countryVisited[]">
                        </div>
                        <div class="form-group">
                            <label>Data de Entrada (MM/AAAA):</label>
                            <input type="month" name="entryDate[]">
                        </div>
                        <div class="form-group">
                            <label>Data de Saída (MM/AAAA):</label>
                            <input type="month" name="exitDate[]">
                        </div>
                        <div class="form-group">
                            <label>Propósito da Viagem:</label>
                            <textarea name="travelPurpose[]" rows="2"></textarea>
                        </div>
                    </div>
                </div>
                <button type="button" onclick="addTravelEntry()" style="background-color: #28a745; margin-top: 10px;">Adicionar Viagem</button>
            </div>

            <div class="form-section">
                <h3>8. Perguntas de Elegibilidade e Histórico</h3>
                <div class="form-group radio-group">
                    <label>a. Você já foi condenado(a) por qualquer crime (incluindo DUI/DWI), tem alguma acusação criminal pendente, ou possui mandados de prisão em aberto em qualquer país?</label>
                    <input type="radio" id="crimeYes" name="criminalRecord" value="Sim"> <label for="crimeYes">Sim</label>
                    <input type="radio" id="crimeNo" name="criminalRecord" value="Não" checked> <label for="crimeNo">Não</label>
                    <div class="form-group" id="crimeDetails" style="display: none; margin-top: 10px;">
                        <label for="crimeExplanation">Explique:</label>
                        <textarea id="crimeExplanation" name="crimeExplanation" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-group radio-group">
                    <label>b. Você já foi considerado(a) culpado(a) de violação de quaisquer regulamentos ou leis alfandegárias, de imigração ou agrícolas em qualquer país?</label>
                    <input type="radio" id="violationYes" name="violationRecord" value="Sim"> <label for="violationYes">Sim</label>
                    <input type="radio" id="violationNo" name="violationRecord" value="Não" checked> <label for="violationNo">Não</label>
                    <div class="form-group" id="violationDetails" style="display: none; margin-top: 10px;">
                        <label for="violationExplanation">Explique:</label>
                        <textarea id="violationExplanation" name="violationExplanation" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-group radio-group">
                    <label>c. Você é objeto de uma investigação em andamento por qualquer agência federal, estadual ou local de aplicação da lei?</label>
                    <input type="radio" id="investigationYes" name="investigationStatus" value="Sim"> <label for="investigationYes">Sim</label>
                    <input type="radio" id="investigationNo" name="investigationStatus" value="Não" checked> <label for="investigationNo">Não</label>
                    <div class="form-group" id="investigationDetails" style="display: none; margin-top: 10px;">
                        <label for="investigationExplanation">Explique:</label>
                        <textarea id="investigationExplanation" name="investigationExplanation" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-group radio-group">
                    <label>d. Você já forneceu informações falsas ou incompletas em qualquer formulário de inscrição ou processo de imigração para os Estados Unidos ou qualquer outro país?</label>
                    <input type="radio" id="falseInfoYes" name="falseInformation" value="Sim"> <label for="falseInfoYes">Sim</label>
                    <input type="radio" id="falseInfoNo" name="falseInformation" value="Não" checked> <label for="falseInfoNo">Não</label>
                    <div class="form-group" id="falseInfoDetails" style="display: none; margin-top: 10px;">
                        <label for="falseInfoExplanation">Explique:</label>
                        <textarea id="falseInfoExplanation" name="falseInfoExplanation" rows="3"></textarea>
                    </div>
                </div>
            </div>

            <div class="form-section declaration-section">
                <h3>9. Declaração e Autorização</h3>
                <p>Eu, <input type="text" id="declaracaoNome" name="declaracaoNome" placeholder="Seu Nome Completo" required>, declaro, sob as penas da lei, que li e compreendi integralmente todas as questões contidas nesta solicitação de visto e afirmo que as respostas por mim fornecidas são verdadeiras, completas e corretas, conforme o meu melhor conhecimento e convicção.</p>

                <p><strong>Declaro estar ciente de que:</strong></p>
                <ol>
                    <li>Qualquer declaração falsa, incompleta ou enganosa poderá resultar na recusa permanente do visto ou na negativa de admissão nos Estados Unidos, conforme disposto na legislação aplicável.</li>
                    <li>Todas as informações prestadas nesta solicitação constituem declarações juramentadas, realizadas sob pena de perjúrio, nos termos do disposto no _28 U.S.C. § 1746_.</li>
                    <li>Informações adicionais poderão ser requisitadas pelas autoridades competentes após a análise desta solicitação, sendo minha responsabilidade fornecê-las tempestivamente.</li>
                    <li>As informações contidas nesta solicitação poderão ser compartilhadas com outras agências governamentais dos Estados Unidos, que possuem autoridade para utilizá-las para fins de aplicação da lei ou para propósitos imigratórios, conforme permitido pela legislação vigente.</li>
                    <li>A fotografia fornecida com esta solicitação poderá ser utilizada pelas autoridades americanas para fins de verificação de identidade, empregabilidade ou outros objetivos legais previstos na legislação dos Estados Unidos.</li>
                </ol>

                <p><strong>Declaro ainda:</strong></p>
                <ol start="6">
                    <li>Que sou exclusivamente responsável pela autenticidade e exatidão dos documentos apresentados e das informações prestadas nesta solicitação.</li>
                    <li>Que tenho pleno conhecimento de que a concessão ou negativa do visto é prerrogativa exclusiva da Autoridade Consular Americana, não cabendo a terceiros qualquer ingerência sobre tal decisão.</li>
                    <li>Que estou ciente de que, em processos de renovação de visto, entrevistas presenciais poderão ser exigidas a critério exclusivo da Autoridade Consular Americana.</li>
                    <li>Que reconheço que o serviço contratado constitui assessoria relacionada ao processo de preenchimento de documentação, agendamento de biometria e entrevista, não abrangendo serviços de entrega ou retirada de documentos no Centro de Atendimento ao Solicitante de Visto (CASV), sendo necessária a contratação de um agente colaborador, caso eu deseje tais serviços adicionais.</li>
                    <li>Que a aposição de minha assinatura eletrônica neste documento possui validade jurídica, conforme a legislação aplicável, e representa meu reconhecimento expresso dos serviços contratados.</li>
                </ol>

                <p>
                    Local: <input type="text" id="declaracaoLocal" name="declaracaoLocal" placeholder="Cidade/Estado" required>
                    Data: <input type="date" id="declaracaoData" name="declaracaoData" required>
                </p>

                <label>
                    <input type="checkbox" id="aceitoTermos" name="aceitoTermos" required>
                    Eu aceito os termos da declaração e autorizo o envio.
                </label>
            </div>

            <div id="loadingMessage" style="display:none; text-align:center; margin-top:20px; color:#0056b3;">
                Processando... Por favor, aguarde.
            </div>
            <button type="submit" id="submitButton">Gerar PDF e Enviar</button>
        </form>
    </div>
</body>
</html>
