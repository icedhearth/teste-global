<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Inscrição Global Entry</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.16/jspdf.autotable.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            color: #333;
            box-sizing: border-box;
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }

        h1, h3 {
            text-align: center;
            color: #0056b3;
            margin-bottom: 20px;
        }

        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f9f9f9;
        }

        .form-section h3 {
            margin-top: 0;
            color: #333;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="date"],
        .form-group input[type="number"],
        .form-group select,
        .form-group textarea {
            width: calc(100% - 22px);
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="email"]:focus,
        .form-group input[type="date"]:focus,
        .form-group input[type="number"]:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #007bff;
            outline: none;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .radio-group label,
        .checkbox-group label {
            display: inline-block;
            margin-right: 15px;
            font-weight: normal;
        }

        .radio-group input[type="radio"],
        .checkbox-group input[type="checkbox"] {
            margin-right: 5px;
        }

        .button-group {
            text-align: center;
            margin-top: 30px;
        }

        .button-group button {
            background-color: #007bff;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease;
            margin: 0 10px;
        }

        .button-group button:hover {
            background-color: #0056b3;
        }

        .declaration-text {
            font-size: 0.9em;
            color: #666;
            margin-top: 20px;
            text-align: justify;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 20px;
            }

            .form-group input[type="text"],
            .form-group input[type="email"],
            .form-group input[type="date"],
            .form-group input[type="number"],
            .form-group select,
            .form-group textarea {
                width: calc(100% - 20px); /* Adjust for padding on smaller screens */
            }

            .button-group button {
                width: 100%;
                margin-bottom: 10px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.8em;
            }

            h3 {
                font-size: 1.2em;
            }

            .form-section {
                padding: 15px;
            }

            .form-group label {
                font-size: 0.95em;
            }

            .form-group input, .form-group select, .form-group textarea {
                font-size: 0.9em;
            }

            .radio-group label,
            .checkbox-group label {
                display: block;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Formulário de Inscrição Global Entry</h1>
        <p style="text-align: center;">Preencha o formulário com seus dados para a aplicação do Global Entry.</p>

        <form id="globalEntryForm">
            <div class="form-section">
                <h3>1. Dados Pessoais</h3>
                <div class="form-group">
                    <label for="fullName">Nome Completo:</label>
                    <input type="text" id="fullName" name="fullName">
                </div>
                <div class="form-group">
                    <label for="dob">Data de Nascimento:</label>
                    <input type="date" id="dob" name="dob">
                </div>
                <div class="form-group">
                    <label for="gender">Gênero:</label>
                    <select id="gender" name="gender">
                        <option value="">Selecione</option>
                        <option value="Masculino">Masculino</option>
                        <option value="Feminino">Feminino</option>
                        <option value="Outro">Outro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="nationality">Nacionalidade:</label>
                    <input type="text" id="nationality" name="nationality">
                </div>
                <div class="form-group">
                    <label for="countryOfBirth">País de Nascimento:</label>
                    <input type="text" id="countryOfBirth" name="countryOfBirth">
                </div>
                <div class="form-group">
                    <label for="email">E-mail:</label>
                    <input type="email" id="email" name="email">
                </div>
                <div class="form-group">
                    <label for="phone">Telefone:</label>
                    <input type="text" id="phone" name="phone" placeholder="(XX) XXXXX-XXXX">
                </div>
            </div>

            <div class="form-section">
                <h3>2. Dados do Passaporte</h3>
                <div class="form-group">
                    <label for="passportNumber">Número do Passaporte:</label>
                    <input type="text" id="passportNumber" name="passportNumber">
                </div>
                <div class="form-group">
                    <label for="issueDate">Data de Emissão:</label>
                    <input type="date" id="issueDate" name="issueDate">
                </div>
                <div class="form-group">
                    <label for="expiryDate">Data de Validade:</label>
                    <input type="date" id="expiryDate" name="expiryDate">
                </div>
                <div class="form-group">
                    <label for="issuingCountry">País Emissor:</label>
                    <input type="text" id="issuingCountry" name="issuingCountry">
                </div>
            </div>

            <div class="form-section">
                <h3>3. Endereço Atual</h3>
                <div class="form-group">
                    <label for="currentAddress">Endereço:</label>
                    <input type="text" id="currentAddress" name="currentAddress" placeholder="Rua, Número, Complemento">
                </div>
                <div class="form-group">
                    <label for="currentCity">Cidade:</label>
                    <input type="text" id="currentCity" name="currentCity">
                </div>
                <div class="form-group">
                    <label for="currentState">Estado/Província:</label>
                    <input type="text" id="currentState" name="currentState">
                </div>
                <div class="form-group">
                    <label for="currentZipCode">CEP/Código Postal:</label>
                    <input type="text" id="currentZipCode" name="currentZipCode">
                </div>
                <div class="form-group">
                    <label for="currentCountry">País:</label>
                    <input type="text" id="currentCountry" name="currentCountry">
                </div>
            </div>

            <div class="form-section">
                <h3>4. Histórico de Endereços (Últimos 5 anos)</h3>
                <p>Liste todos os endereços onde você residiu nos últimos 5 anos. Comece pelo mais recente.</p>
                <div id="addressHistoryContainer">
                    <div class="address-entry">
                        <div class="form-group">
                            <label>Endereço:</label>
                            <input type="text" name="pastAddress[]" placeholder="Rua, Número, Complemento">
                        </div>
                        <div class="form-group">
                            <label>Cidade:</label>
                            <input type="text" name="pastCity[]">
                        </div>
                        <div class="form-group">
                            <label>Estado/Província:</label>
                            <input type="text" name="pastState[]">
                        </div>
                        <div class="form-group">
                            <label>País:</label>
                            <input type="text" name="pastCountry[]">
                        </div>
                        <div class="form-group">
                            <label>De (MM/AAAA):</label>
                            <input type="month" name="pastAddressFrom[]">
                        </div>
                        <div class="form-group">
                            <label>Até (MM/AAAA):</label>
                            <input type="month" name="pastAddressTo[]">
                        </div>
                    </div>
                </div>
                <button type="button" onclick="addAddressEntry()" style="background-color: #28a745; margin-top: 10px;">Adicionar Endereço</button>
            </div>

            <div class="form-section">
                <h3>5. Histórico de Emprego (Últimos 5 anos)</h3>
                <p>Liste seu histórico de emprego nos últimos 5 anos. Comece pelo mais recente.</p>
                <div id="employmentHistoryContainer">
                    <div class="employment-entry">
                        <div class="form-group">
                            <label>Empregador:</label>
                            <input type="text" name="employerName[]">
                        </div>
                        <div class="form-group">
                            <label>Cargo:</label>
                            <input type="text" name="occupation[]">
                        </div>
                        <div class="form-group">
                            <label>Endereço do Empregador:</label>
                            <input type="text" name="employerAddress[]" placeholder="Rua, Número, Cidade, País">
                        </div>
                        <div class="form-group">
                            <label>De (MM/AAAA):</label>
                            <input type="month" name="employmentFrom[]">
                        </div>
                        <div class="form-group">
                            <label>Até (MM/AAAA):</label>
                            <input type="month" name="employmentTo[]">
                        </div>
                    </div>
                </div>
                <button type="button" onclick="addEmploymentEntry()" style="background-color: #28a745; margin-top: 10px;">Adicionar Emprego</button>
            </div>

            <div class="form-section">
                <h3>6. Histórico de Viagens Internacionais (Últimos 5 anos)</h3>
                <p>Liste todos os países que você visitou nos últimos 5 anos, exceto o seu país de residência atual.</p>
                <div id="travelHistoryContainer">
                    <div class="travel-entry">
                        <div class="form-group">
                            <label>País Visitado:</label>
                            <input type="text" name="countryVisited[]">
                        </div>
                        <div class="form-group">
                            <label>Data de Entrada (MM/AAAA):</label>
                            <input type="month" name="entryDate[]">
                        </div>
                        <div class="form-group">
                            <label>Data de Saída (MM/AAAA):</label>
                            <input type="month" name="exitDate[]">
                        </div>
                        <div class="form-group">
                            <label>Propósito da Viagem:</label>
                            <textarea name="travelPurpose[]" rows="2"></textarea>
                        </div>
                    </div>
                </div>
                <button type="button" onclick="addTravelEntry()" style="background-color: #28a745; margin-top: 10px;">Adicionar Viagem</button>
            </div>

            <div class="form-section">
                <h3>7. Perguntas de Elegibilidade e Histórico</h3>
                <div class="form-group radio-group">
                    <label>a. Você já foi condenado(a) por algum crime (incluindo DUI/DWI), tem alguma acusação criminal pendente, ou possui mandados de prisão em aberto em qualquer país?</label>
                    <input type="radio" id="crimeYes" name="criminalRecord" value="Sim"> <label for="crimeYes">Sim</label>
                    <input type="radio" id="crimeNo" name="criminalRecord" value="Não"> <label for="crimeNo">Não</label>
                    <div class="form-group" id="crimeDetails" style="display: none; margin-top: 10px;">
                        <label for="crimeExplanation">Explique:</label>
                        <textarea id="crimeExplanation" name="crimeExplanation" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-group radio-group">
                    <label>b. Você já foi considerado(a) culpado(a) de violação de quaisquer regulamentos ou leis alfandegárias, de imigração ou agrícolas em qualquer país?</label>
                    <input type="radio" id="violationYes" name="violationRecord" value="Sim"> <label for="violationYes">Sim</label>
                    <input type="radio" id="violationNo" name="violationRecord" value="Não"> <label for="violationNo">Não</label>
                    <div class="form-group" id="violationDetails" style="display: none; margin-top: 10px;">
                        <label for="violationExplanation">Explique:</label>
                        <textarea id="violationExplanation" name="violationExplanation" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-group radio-group">
                    <label>c. Você é objeto de uma investigação em andamento por qualquer agência federal, estadual ou local de aplicação da lei?</label>
                    <input type="radio" id="investigationYes" name="investigationStatus" value="Sim"> <label for="investigationYes">Sim</label>
                    <input type="radio" id="investigationNo" name="investigationStatus" value="Não"> <label for="investigationNo">Não</label>
                    <div class="form-group" id="investigationDetails" style="display: none; margin-top: 10px;">
                        <label for="investigationExplanation">Explique:</label>
                        <textarea id="investigationExplanation" name="investigationExplanation" rows="3"></textarea>
                    </div>
                </div>

                <div class="form-group radio-group">
                    <label>d. Você já forneceu informações falsas ou incompletas em qualquer formulário de inscrição ou processo de imigração para os Estados Unidos ou qualquer outro país?</label>
                    <input type="radio" id="falseInfoYes" name="falseInformation" value="Sim"> <label for="falseInfoYes">Sim</label>
                    <input type="radio" id="falseInfoNo" name="falseInformation" value="Não"> <label for="falseInfoNo">Não</label>
                    <div class="form-group" id="falseInfoDetails" style="display: none; margin-top: 10px;">
                        <label for="falseInfoExplanation">Explique:</label>
                        <textarea id="falseInfoExplanation" name="falseInfoExplanation" rows="3"></textarea>
                    </div>
                </div>
            </div>

            <div class="form-section declaration-section">
                <h3>8. Declaração e Autorização</h3>
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="declaration" name="declaration">
                    <label for="declaration">Declaro que todas as informações fornecidas neste formulário são verdadeiras e completas. Autorizo a **Objetivo Turismo Ltda.** a submeter minha inscrição ao programa Global Entry e a ter acesso a todas as informações relacionadas ao meu processo de aplicação, incluindo status e resultados, em meu nome. Entendo que qualquer informação falsa ou enganosa pode resultar na negação da minha inscrição ou revogação de minha filiação ao programa Global Entry.</label>
                </div>
            </div>

            <div class="button-group">
                <button type="button" onclick="generateGlobalEntryPDF()">Gerar PDF</button>
                <button type="reset">Limpar Formulário</button>
            </div>
        </form>
    </div>

    <script>
        const { jsPDF } = window.jspdf;

        // Função para adicionar campos de histórico de endereço
        function addAddressEntry() {
            const container = document.getElementById('addressHistoryContainer');
            const newEntry = document.createElement('div');
            newEntry.classList.add('address-entry');
            newEntry.innerHTML = `
                <div class="form-group">
                    <label>Endereço:</label>
                    <input type="text" name="pastAddress[]" placeholder="Rua, Número, Complemento">
                </div>
                <div class="form-group">
                    <label>Cidade:</label>
                    <input type="text" name="pastCity[]">
                </div>
                <div class="form-group">
                    <label>Estado/Província:</label>
                    <input type="text" name="pastState[]">
                </div>
                <div class="form-group">
                    <label>País:</label>
                    <input type="text" name="pastCountry[]">
                </div>
                <div class="form-group">
                    <label>De (MM/AAAA):</label>
                    <input type="month" name="pastAddressFrom[]">
                </div>
                <div class="form-group">
                    <label>Até (MM/AAAA):</label>
                    <input type="month" name="pastAddressTo[]">
                </div>
                <button type="button" onclick="this.parentNode.remove()" style="background-color: #dc3545; margin-top: 5px;">Remover</button>
                <hr style="margin: 15px 0;">
            `;
            container.appendChild(newEntry);
        }

        // Função para adicionar campos de histórico de emprego
        function addEmploymentEntry() {
            const container = document.getElementById('employmentHistoryContainer');
            const newEntry = document.createElement('div');
            newEntry.classList.add('employment-entry');
            newEntry.innerHTML = `
                <div class="form-group">
                    <label>Empregador:</label>
                    <input type="text" name="employerName[]">
                </div>
                <div class="form-group">
                    <label>Cargo:</label>
                    <input type="text" name="occupation[]">
                </div>
                <div class="form-group">
                    <label>Endereço do Empregador:</label>
                    <input type="text" name="employerAddress[]" placeholder="Rua, Número, Cidade, País">
                </div>
                <div class="form-group">
                    <label>De (MM/AAAA):</label>
                    <input type="month" name="employmentFrom[]">
                </div>
                <div class="form-group">
                    <label>Até (MM/AAAA):</label>
                    <input type="month" name="employmentTo[]">
                </div>
                <button type="button" onclick="this.parentNode.remove()" style="background-color: #dc3545; margin-top: 5px;">Remover</button>
                <hr style="margin: 15px 0;">
            `;
            container.appendChild(newEntry);
        }

        // Função para adicionar campos de histórico de viagens
        function addTravelEntry() {
            const container = document.getElementById('travelHistoryContainer');
            const newEntry = document.createElement('div');
            newEntry.classList.add('travel-entry');
            newEntry.innerHTML = `
                <div class="form-group">
                    <label>País Visitado:</label>
                    <input type="text" name="countryVisited[]">
                </div>
                <div class="form-group">
                    <label>Data de Entrada (MM/AAAA):</label>
                    <input type="month" name="entryDate[]">
                </div>
                <div class="form-group">
                    <label>Data de Saída (MM/AAAA):</label>
                    <input type="month" name="exitDate[]">
                </div>
                <div class="form-group">
                    <label>Propósito da Viagem:</label>
                    <textarea name="travelPurpose[]" rows="2"></textarea>
                </div>
                <button type="button" onclick="this.parentNode.remove()" style="background-color: #dc3545; margin-top: 5px;">Remover</button>
                <hr style="margin: 15px 0;">
            `;
            container.appendChild(newEntry);
        }

        // Lógica para mostrar/esconder campos de explicação
        document.querySelectorAll('input[name="criminalRecord"]').forEach(radio => {
            radio.addEventListener('change', (event) => {
                document.getElementById('crimeDetails').style.display = event.target.value === 'Sim' ? 'block' : 'none';
            });
        });
        document.querySelectorAll('input[name="violationRecord"]').forEach(radio => {
            radio.addEventListener('change', (event) => {
                document.getElementById('violationDetails').style.display = event.target.value === 'Sim' ? 'block' : 'none';
            });
        });
        document.querySelectorAll('input[name="investigationStatus"]').forEach(radio => {
            radio.addEventListener('change', (event) => {
                document.getElementById('investigationDetails').style.display = event.target.value === 'Sim' ? 'block' : 'none';
            });
        });
        document.querySelectorAll('input[name="falseInformation"]').forEach(radio => {
            radio.addEventListener('change', (event) => {
                document.getElementById('falseInfoDetails').style.display = event.target.value === 'Sim' ? 'block' : 'none';
            });
        });

        // Função para adicionar texto justificado com formatação
        function addJustifiedText(doc, text, x, y, maxWidth, lineHeight) {
            const words = text.split(' ');
            let line = '';
            let currentY = y;
            let bold = false;
            let italic = false;

            for (let i = 0; i < words.length; i++) {
                let word = words[i];

                if (word.includes('**')) { // Bold toggle
                    bold = !bold;
                    word = word.replace(/\*\*/g, '');
                    doc.setFont(doc.getFont().fontName, bold ? 'bold' : 'normal');
                }
                if (word.includes('*')) { // Italic toggle (assuming single asterisk for italic)
                    italic = !italic;
                    word = word.replace(/\*/g, '');
                    doc.setFont(doc.getFont().fontName, doc.getFont().fontStyle, italic ? 'italic' : 'normal');
                }

                const testLine = line + (line ? ' ' : '') + word;
                const testWidth = doc.getTextWidth(testLine);

                if (testWidth > maxWidth && i > 0) {
                    doc.text(line, x, currentY, { align: 'justify' });
                    line = word;
                    currentY += lineHeight;
                } else {
                    line = testLine;
                }
            }
            if (line) {
                doc.text(line, x, currentY, { align: 'justify' });
            }
            return currentY + lineHeight; // Return next Y position
        }

        async function generateGlobalEntryPDF() {
            const doc = new jsPDF();
            let y = 20;
            const margin = 20;
            const lineHeight = 7;
            const form = document.getElementById('globalEntryForm');

            doc.setFontSize(18);
            doc.setTextColor(40, 40, 40);
            doc.text("Formulário de Inscrição Global Entry", doc.internal.pageSize.width / 2, y, { align: "center" });
            y += 15;

            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);

            // 1. Dados Pessoais
            doc.setFontSize(14);
            doc.text("1. Dados Pessoais", margin, y);
            y += 10;
            doc.setFontSize(11);
            doc.text(`Nome Completo: ${form.fullName.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`Data de Nascimento: ${form.dob.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`Gênero: ${form.gender.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`Nacionalidade: ${form.nationality.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`País de Nascimento: ${form.countryOfBirth.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`E-mail: ${form.email.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`Telefone: ${form.phone.value || 'N/A'}`, margin, y); y += lineHeight;
            y += 5;

            // 2. Dados do Passaporte
            if (y + 40 > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
            doc.setFontSize(14);
            doc.text("2. Dados do Passaporte", margin, y);
            y += 10;
            doc.setFontSize(11);
            doc.text(`Número do Passaporte: ${form.passportNumber.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`Data de Emissão: ${form.issueDate.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`Data de Validade: ${form.expiryDate.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`País Emissor: ${form.issuingCountry.value || 'N/A'}`, margin, y); y += lineHeight;
            y += 5;

            // 3. Endereço Atual
            if (y + 40 > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
            doc.setFontSize(14);
            doc.text("3. Endereço Atual", margin, y);
            y += 10;
            doc.setFontSize(11);
            doc.text(`Endereço: ${form.currentAddress.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`Cidade: ${form.currentCity.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`Estado/Província: ${form.currentState.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`CEP/Código Postal: ${form.currentZipCode.value || 'N/A'}`, margin, y); y += lineHeight;
            doc.text(`País: ${form.currentCountry.value || 'N/A'}`, margin, y); y += lineHeight;
            y += 5;

            // 4. Histórico de Endereços
            if (y + 40 > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
            doc.setFontSize(14);
            doc.text("4. Histórico de Endereços (Últimos 5 anos)", margin, y);
            y += 10;
            doc.setFontSize(11);
            const pastAddresses = document.querySelectorAll('#addressHistoryContainer .address-entry');
            if (pastAddresses.length === 0 || (!pastAddresses[0].querySelector('input[name="pastAddress[]"]').value && !pastAddresses[0].querySelector('input[name="pastCity[]"]').value)) {
                 doc.text('Nenhum endereço anterior informado.', margin, y);
                 y += lineHeight;
            } else {
                pastAddresses.forEach((entry, index) => {
                    if (y + 3 * lineHeight > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
                    const address = entry.querySelector('input[name="pastAddress[]"]').value || 'N/A';
                    const city = entry.querySelector('input[name="pastCity[]"]').value || 'N/A';
                    const state = entry.querySelector('input[name="pastState[]"]').value || 'N/A';
                    const country = entry.querySelector('input[name="pastCountry[]"]').value || 'N/A';
                    const from = entry.querySelector('input[name="pastAddressFrom[]"]').value || 'N/A';
                    const to = entry.querySelector('input[name="pastAddressTo[]"]').value || 'N/A';
                    doc.text(`Endereço ${index + 1}: ${address}, ${city}, ${state}, ${country}`, margin, y); y += lineHeight;
                    doc.text(`Período: ${from} a ${to}`, margin, y); y += lineHeight;
                    y += 3; // Small gap between entries
                });
            }
            y += 5;

            // 5. Histórico de Emprego
            if (y + 40 > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
            doc.setFontSize(14);
            doc.text("5. Histórico de Emprego (Últimos 5 anos)", margin, y);
            y += 10;
            doc.setFontSize(11);
            const employmentEntries = document.querySelectorAll('#employmentHistoryContainer .employment-entry');
            if (employmentEntries.length === 0 || (!employmentEntries[0].querySelector('input[name="employerName[]"]').value && !employmentEntries[0].querySelector('input[name="occupation[]"]').value)) {
                doc.text('Nenhum histórico de emprego informado.', margin, y);
                y += lineHeight;
            } else {
                employmentEntries.forEach((entry, index) => {
                    if (y + 3 * lineHeight > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
                    const employer = entry.querySelector('input[name="employerName[]"]').value || 'N/A';
                    const occupation = entry.querySelector('input[name="occupation[]"]').value || 'N/A';
                    const employerAddress = entry.querySelector('input[name="employerAddress[]"]').value || 'N/A';
                    const from = entry.querySelector('input[name="employmentFrom[]"]').value || 'N/A';
                    const to = entry.querySelector('input[name="employmentTo[]"]').value || 'N/A';
                    doc.text(`Emprego ${index + 1}: ${employer} - ${occupation}`, margin, y); y += lineHeight;
                    doc.text(`Endereço: ${employerAddress}`, margin, y); y += lineHeight;
                    doc.text(`Período: ${from} a ${to}`, margin, y); y += lineHeight;
                    y += 3;
                });
            }
            y += 5;

            // 6. Histórico de Viagens Internacionais
            if (y + 40 > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
            doc.setFontSize(14);
            doc.text("6. Histórico de Viagens Internacionais (Últimos 5 anos)", margin, y);
            y += 10;
            doc.setFontSize(11);
            const travelEntries = document.querySelectorAll('#travelHistoryContainer .travel-entry');
            if (travelEntries.length === 0 || (!travelEntries[0].querySelector('input[name="countryVisited[]"]').value && !travelEntries[0].querySelector('textarea[name="travelPurpose[]"]').value)) {
                doc.text('Nenhum histórico de viagem informado.', margin, y);
                y += lineHeight;
            } else {
                travelEntries.forEach((entry, index) => {
                    if (y + 4 * lineHeight > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
                    const country = entry.querySelector('input[name="countryVisited[]"]').value || 'N/A';
                    const entryDate = entry.querySelector('input[name="entryDate[]"]').value || 'N/A';
                    const exitDate = entry.querySelector('input[name="exitDate[]"]').value || 'N/A';
                    const purpose = entry.querySelector('textarea[name="travelPurpose[]"]').value || 'N/A';
                    doc.text(`Viagem ${index + 1}: País: ${country}`, margin, y); y += lineHeight;
                    doc.text(`Período: ${entryDate} a ${exitDate}`, margin, y); y += lineHeight;
                    doc.text(`Propósito: ${purpose}`, margin, y); y += lineHeight;
                    y += 3;
                });
            }
            y += 5;

            // 7. Perguntas de Elegibilidade e Histórico
            if (y + 80 > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
            doc.setFontSize(14);
            doc.text("7. Perguntas de Elegibilidade e Histórico", margin, y);
            y += 10;
            doc.setFontSize(11);

            const criminalRecord = form.criminalRecord.value || 'N/A';
            const crimeExplanation = form.crimeExplanation.value || '';
            doc.text(`a. Condenação criminal/Acusação/Mandados: ${criminalRecord}${criminalRecord === 'Sim' ? ` - ${crimeExplanation}` : ''}`, margin, y); y += lineHeight;

            const violationRecord = form.violationRecord.value || 'N/A';
            const violationExplanation = form.violationExplanation.value || '';
            doc.text(`b. Violação alfandegária/imigração/agrícola: ${violationRecord}${violationRecord === 'Sim' ? ` - ${violationExplanation}` : ''}`, margin, y); y += lineHeight;

            const investigationStatus = form.investigationStatus.value || 'N/A';
            const investigationExplanation = form.investigationExplanation.value || '';
            doc.text(`c. Investigação em andamento: ${investigationStatus}${investigationStatus === 'Sim' ? ` - ${investigationExplanation}` : ''}`, margin, y); y += lineHeight;

            const falseInformation = form.falseInformation.value || 'N/A';
            const falseInfoExplanation = form.falseInfoExplanation.value || '';
            doc.text(`d. Informações falsas/incompletas: ${falseInformation}${falseInformation === 'Sim' ? ` - ${falseInfoExplanation}` : ''}`, margin, y); y += lineHeight;
            y += 5;

            // 8. Declaração
            if (y + 40 > doc.internal.pageSize.height - margin) { doc.addPage(); y = margin; }
            doc.setFontSize(14);
            doc.text("8. Declaração e Autorização", margin, y);
            y += 10;
            doc.setFontSize(11);
            const declarationText = `Declaro que todas as informações fornecidas neste formulário são verdadeiras e completas. Autorizo a **Objetivo Turismo Ltda.** a submeter minha inscrição ao programa Global Entry e a ter acesso a todas as informações relacionadas ao meu processo de aplicação, incluindo status e resultados, em meu nome. Entendo que qualquer informação falsa ou enganosa pode resultar na negação da minha inscrição ou revogação de minha filiação ao programa Global Entry.`;

            doc.setFont(doc.getFont().fontName, 'normal'); // Reset font style
            y = addJustifiedText(doc, declarationText, margin, y, doc.internal.pageSize.width - 2 * margin, lineHeight);
            doc.text(`Declaração aceita: ${form.declaration.checked ? 'Sim' : 'Não'}`, margin, y); y += lineHeight;
            y += 15;

            // Finalização
            doc.setFontSize(10);
            doc.text(`Data de Geração: ${new Date().toLocaleDateString('pt-BR')}`, margin, doc.internal.pageSize.height - 15);
            doc.text("Gerado por: Formulário de Inscrição Global Entry", doc.internal.pageSize.width - margin, doc.internal.pageSize.height - 15, { align: "right" });

            doc.save("Inscricao_Global_Entry.pdf");
        }
    </script>
</body>
</html>
